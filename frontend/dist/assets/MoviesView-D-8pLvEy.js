import{p as y,o as w,b as c,c as M,d as a,k as g,q as h,h as p,i as t}from"./index-yptzv2Gs.js";import{u as x,_ as k}from"./LoadingSpinner-BgCI5orC.js";import{_ as B}from"./MediaGrid-CpnfhZuL.js";import"./MediaCard-BGe4CHWK.js";const b={class:"p-6"},S={class:"flex items-center justify-between mb-6"},V={class:"flex gap-3"},E={__name:"MoviesView",setup(P){const f=x(),s=t([]),o=t(!0),u=t(!1),n=t(1),d=t(1),i=t("popularity"),r=t(!0),v=async(l=1)=>{const e=await f.fetchPopularMovies(l);return e?(d.value=e.total_pages||1,r.value=l<d.value,e.results||[]):[]},m=async()=>{if(!(u.value||!r.value)){u.value=!0,n.value++;try{const l=await v(n.value);s.value=[...s.value,...l]}finally{u.value=!1}}};return y(i,async()=>{o.value=!0,n.value=1,s.value=await v(1),o.value=!1}),w(async()=>{o.value=!0,s.value=await v(1),o.value=!1}),(l,e)=>(c(),M("div",b,[a("div",S,[e[2]||(e[2]=a("h1",{class:"text-2xl font-bold text-white"},"Фильмы",-1)),a("div",V,[g(a("select",{"onUpdate:modelValue":e[0]||(e[0]=_=>i.value=_),class:"input-field w-auto text-sm"},[...e[1]||(e[1]=[a("option",{value:"popularity"},"По популярности",-1),a("option",{value:"release_date"},"По дате выхода",-1),a("option",{value:"vote_average"},"По рейтингу",-1)])],512),[[h,i.value]])])]),o.value&&s.value.length===0?(c(),p(k,{key:0,text:"Загрузка фильмов..."})):(c(),p(B,{key:1,items:s.value,type:"movie","has-more":r.value,loading:u.value,onLoadMore:m},null,8,["items","has-more","loading"]))]))}};export{E as default};
