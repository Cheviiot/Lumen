import{p as y,o as w,b as c,c as g,d as a,k as h,q as x,h as p,i as t}from"./index-yptzv2Gs.js";import{u as M,_ as k}from"./LoadingSpinner-BgCI5orC.js";import{_ as S}from"./MediaGrid-CpnfhZuL.js";import"./MediaCard-BGe4CHWK.js";const B={class:"p-6"},b={class:"flex items-center justify-between mb-6"},V={class:"flex gap-3"},E={__name:"SeriesView",setup(P){const f=M(),s=t([]),o=t(!0),r=t(!1),u=t(1),d=t(1),n=t("popularity"),i=t(!0),v=async(l=1)=>{const e=await f.fetchPopularTV(l);return e?(d.value=e.total_pages||1,i.value=l<d.value,e.results||[]):[]},m=async()=>{if(!(r.value||!i.value)){r.value=!0,u.value++;try{const l=await v(u.value);s.value=[...s.value,...l]}finally{r.value=!1}}};return y(n,async()=>{o.value=!0,u.value=1,s.value=await v(1),o.value=!1}),w(async()=>{o.value=!0,s.value=await v(1),o.value=!1}),(l,e)=>(c(),g("div",B,[a("div",b,[e[2]||(e[2]=a("h1",{class:"text-2xl font-bold text-white"},"Сериалы",-1)),a("div",V,[h(a("select",{"onUpdate:modelValue":e[0]||(e[0]=_=>n.value=_),class:"input-field w-auto text-sm"},[...e[1]||(e[1]=[a("option",{value:"popularity"},"По популярности",-1),a("option",{value:"first_air_date"},"По дате выхода",-1),a("option",{value:"vote_average"},"По рейтингу",-1)])],512),[[x,n.value]])])]),o.value&&s.value.length===0?(c(),p(k,{key:0,text:"Загрузка сериалов..."})):(c(),p(S,{key:1,items:s.value,type:"tv","has-more":i.value,loading:r.value,onLoadMore:m},null,8,["items","has-more","loading"]))]))}};export{E as default};
