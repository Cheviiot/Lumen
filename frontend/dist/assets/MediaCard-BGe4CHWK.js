import{o as w,b as n,c as d,d as t,t as v,g as x,m as g,s as h,i as f,j as c}from"./index-yptzv2Gs.js";import{u as B}from"./LoadingSpinner-BgCI5orC.js";const C={class:"media-poster"},F=["src","alt"],M={key:0,class:"rating-badge"},z={class:"text-white text-xs font-semibold"},j={class:"absolute inset-0 bg-gradient-to-t from-dark-900 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},L={class:"absolute bottom-0 left-0 right-0 p-3"},S={class:"flex gap-2"},E=["fill"],V=["fill"],I={class:"p-3 h-[60px] flex flex-col justify-between"},N={class:"font-medium text-white text-sm line-clamp-2 mb-1"},T={class:"text-dark-500 text-xs"},D={__name:"MediaCard",props:{media:{type:Object,required:!0},type:{type:String,default:"movie"}},emits:["click"],setup(p){const e=p,o=B(),s=f(!1),r=f(!1),l=c(()=>e.media.title||e.media.name||"Без названия"),m=c(()=>{const i=e.media.release_date||e.media.first_air_date;return i?i.split("-")[0]:""}),u=c(()=>e.media.vote_average||0),_=c(()=>o.getImageURL(e.media.poster_path,"w342")),k=i=>{i.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="342" height="513" viewBox="0 0 342 513"><rect fill="%231e293b" width="342" height="513"/><text fill="%2364748b" font-family="sans-serif" font-size="24" x="50%" y="50%" text-anchor="middle" dy=".3em">Нет постера</text></svg>'},b=async()=>{s.value?await o.removeFromFavorites(e.media.id,e.type):await o.addToFavorites({tmdb_id:e.media.id,media_type:e.type,title:l.value,poster:e.media.poster_path,year:m.value,rating:u.value}),s.value=!s.value},y=async()=>{r.value?await o.removeFromBookmarks(e.media.id,e.type):await o.addToBookmarks({tmdb_id:e.media.id,media_type:e.type,title:l.value,poster:e.media.poster_path,year:m.value}),r.value=!r.value};return w(async()=>{s.value=await o.isFavorite(e.media.id,e.type)}),(i,a)=>(n(),d("div",{class:"card-hover group",onClick:a[0]||(a[0]=U=>i.$emit("click",p.media))},[t("div",C,[t("img",{src:_.value,alt:l.value,loading:"lazy",draggable:"false",class:"transition-transform duration-300",onError:k},null,40,F),u.value>0?(n(),d("div",M,[a[1]||(a[1]=t("svg",{class:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),t("span",z,v(u.value.toFixed(1)),1)])):x("",!0),t("div",j,[t("div",L,[t("div",S,[t("button",{onClick:h(b,["stop"]),class:g(["p-2 bg-dark-800/80 backdrop-blur-sm rounded-full hover:bg-accent-600 transition-colors",{"bg-red-500 hover:bg-red-600":s.value}])},[(n(),d("svg",{class:"w-4 h-4",fill:s.value?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...a[2]||(a[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],8,E))],2),t("button",{onClick:h(y,["stop"]),class:g(["p-2 bg-dark-800/80 backdrop-blur-sm rounded-full hover:bg-accent-600 transition-colors",{"bg-accent-600":r.value}])},[(n(),d("svg",{class:"w-4 h-4",fill:r.value?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...a[3]||(a[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"},null,-1)])],8,V))],2)])])])]),t("div",I,[t("h3",N,v(l.value),1),t("p",T,v(m.value),1)])]))}};export{D as _};
