import{A as J,i,b as K,c as Q,d as l,t as W}from"./index-yptzv2Gs.js";const aa=J("media",()=>{const d=i([]),c=i([]),s=i([]),f=i([]),T=i([]),v=i([]),G=i([]),D=i([]),u=i([]),M=i([]),h=i(!1);async function k(n=1){var o,a,e,t,w,p,y,B;if(console.log("fetchTrendingMovies called, window.go:",!!window.go),console.log("TMDB available:",!!((a=(o=window.go)==null?void 0:o.main)!=null&&a.TMDB)),console.log("GetTrendingMovies available:",!!((w=(t=(e=window.go)==null?void 0:e.main)==null?void 0:t.TMDB)!=null&&w.GetTrendingMovies)),(B=(y=(p=window.go)==null?void 0:p.main)==null?void 0:y.TMDB)!=null&&B.GetTrendingMovies)try{const r=await window.go.main.TMDB.GetTrendingMovies("week",n);return console.log("GetTrendingMovies result:",r),d.value=(r==null?void 0:r.results)||[],r}catch(r){return console.error("GetTrendingMovies error:",r),null}return console.log("GetTrendingMovies NOT available!"),null}async function V(n=1){var o,a,e;if((e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetTrendingTV)try{const t=await window.go.main.TMDB.GetTrendingTV("week",n);return console.log("GetTrendingTV result:",t),c.value=(t==null?void 0:t.results)||[],t}catch(t){return console.error("GetTrendingTV error:",t),null}return null}async function _(n=1){var o,a,e;if((e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetPopularMovies){const t=await window.go.main.TMDB.GetPopularMovies(n);return s.value=(t==null?void 0:t.results)||[],t}return null}async function x(n=1){var o,a,e;if((e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetPopularTV){const t=await window.go.main.TMDB.GetPopularTV(n);return f.value=(t==null?void 0:t.results)||[],t}return null}async function S(n=1){var o,a,e;if((e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetAnimationMovies){const t=await window.go.main.TMDB.GetAnimationMovies(n);return T.value=(t==null?void 0:t.results)||[],t}return null}async function A(n=1){var o,a,e;if((e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetAnimationTV){const t=await window.go.main.TMDB.GetAnimationTV(n);return v.value=(t==null?void 0:t.results)||[],t}return null}async function F(n,o=1){var a,e,t;return(t=(e=(a=window.go)==null?void 0:a.main)==null?void 0:e.TMDB)!=null&&t.SearchMovies?await window.go.main.TMDB.SearchMovies(n,o):null}async function H(n,o=1){var a,e,t;return(t=(e=(a=window.go)==null?void 0:a.main)==null?void 0:e.TMDB)!=null&&t.SearchTV?await window.go.main.TMDB.SearchTV(n,o):null}async function I(n){var o,a,e;return(e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetMovieDetails?await window.go.main.TMDB.GetMovieDetails(n):null}async function P(n){var o,a,e;return(e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.TMDB)!=null&&e.GetTVDetails?await window.go.main.TMDB.GetTVDetails(n):null}async function R(n,o){var a,e,t;return(t=(e=(a=window.go)==null?void 0:a.main)==null?void 0:e.TMDB)!=null&&t.GetSeasonDetails?await window.go.main.TMDB.GetSeasonDetails(n,o):null}async function m(){var n,o,a;(a=(o=(n=window.go)==null?void 0:n.main)==null?void 0:o.Database)!=null&&a.GetFavorites&&(D.value=await window.go.main.Database.GetFavorites()||[])}async function $(n){var o,a,e;(e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.Database)!=null&&e.AddFavorite&&(await window.go.main.Database.AddFavorite(n),await m())}async function E(n,o){var a,e,t;(t=(e=(a=window.go)==null?void 0:a.main)==null?void 0:e.Database)!=null&&t.RemoveFavorite&&(await window.go.main.Database.RemoveFavorite(n,o),await m())}async function L(n,o){var a,e,t;return(t=(e=(a=window.go)==null?void 0:a.main)==null?void 0:e.Database)!=null&&t.IsFavorite?await window.go.main.Database.IsFavorite(n,o):!1}async function b(){var n,o,a;(a=(o=(n=window.go)==null?void 0:n.main)==null?void 0:o.Database)!=null&&a.GetHistory&&(u.value=await window.go.main.Database.GetHistory()||[])}async function C(n){var o,a,e;(e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.Database)!=null&&e.AddHistory&&(await window.go.main.Database.AddHistory(n),await b())}async function N(){var n,o,a;(a=(o=(n=window.go)==null?void 0:n.main)==null?void 0:o.Database)!=null&&a.ClearHistory&&(await window.go.main.Database.ClearHistory(),u.value=[])}async function g(){var n,o,a;(a=(o=(n=window.go)==null?void 0:n.main)==null?void 0:o.Database)!=null&&a.GetBookmarks&&(M.value=await window.go.main.Database.GetBookmarks()||[])}async function U(n){var o,a,e;(e=(a=(o=window.go)==null?void 0:o.main)==null?void 0:a.Database)!=null&&e.AddBookmark&&(await window.go.main.Database.AddBookmark(n),await g())}async function j(n,o){var a,e,t;(t=(e=(a=window.go)==null?void 0:a.main)==null?void 0:e.Database)!=null&&t.RemoveBookmark&&(await window.go.main.Database.RemoveBookmark(n,o),await g())}function O(n,o="w500"){if(!n)return"/placeholder.png";const a=localStorage.getItem("tmdb_proxy_enabled")!=="false",e=localStorage.getItem("tmdb_proxy_images")!=="false";return a&&e?`https://tmdbimg.rootu.top/t/p/${o}${n}`:`https://image.tmdb.org/t/p/${o}${n}`}function q(n){const o=localStorage.getItem("tmdb_proxy_enabled")!=="false",a=localStorage.getItem("tmdb_proxy_api")!=="false";return o&&a?`https://tmdbapi.rootu.top/3/${n}`:`https://api.themoviedb.org/3/${n}`}return{trendingMovies:d,trendingTV:c,popularMovies:s,popularTV:f,animationMovies:T,animationTV:v,searchResults:G,favorites:D,history:u,bookmarks:M,isLoading:h,fetchTrendingMovies:k,fetchTrendingTV:V,fetchPopularMovies:_,fetchPopularTV:x,fetchAnimationMovies:S,fetchAnimationTV:A,searchMovies:F,searchTV:H,getMovieDetails:I,getTVDetails:P,getSeasonDetails:R,loadFavorites:m,addToFavorites:$,removeFromFavorites:E,isFavorite:L,loadHistory:b,addToHistory:C,clearHistory:N,loadBookmarks:g,addToBookmarks:U,removeFromBookmarks:j,getImageURL:O,getTmdbApiUrl:q}}),X={class:"flex items-center justify-center h-full"},Y={class:"flex flex-col items-center gap-4"},Z={class:"text-dark-500 text-sm"},oa={__name:"LoadingSpinner",props:{text:{type:String,default:"Загрузка..."}},setup(d){return(c,s)=>(K(),Q("div",X,[l("div",Y,[s[0]||(s[0]=l("div",{class:"relative"},[l("div",{class:"w-12 h-12 border-2 border-dark-800 rounded-full"}),l("div",{class:"absolute top-0 left-0 w-12 h-12 border-2 border-accent-500 rounded-full border-t-transparent animate-spin"})],-1)),l("p",Z,W(d.text),1)])]))}};export{oa as _,aa as u};
