import{p as x,o as b,b as d,c as A,d as t,k as h,q as V,h as k,i as s,j as T}from"./index-yptzv2Gs.js";import{u as P,_ as S}from"./LoadingSpinner-BgCI5orC.js";import{_ as j}from"./MediaGrid-CpnfhZuL.js";import"./MediaCard-BGe4CHWK.js";const U={class:"p-6"},$={class:"flex items-center justify-between mb-6"},q={class:"flex gap-3"},z={__name:"CartoonsView",setup(C){const w=P(),o=s("movies"),c=s("popularity"),u=s([]),i=s([]),l=s(!0),r=s(!1),n=s(1),v=s(1),y=s(1),g=s(1),_=T(()=>o.value==="movies"?u.value:i.value),M=T(()=>o.value==="movies"?n.value<y.value:v.value<g.value),m=async(a=1)=>{const e=await w.fetchAnimationMovies(a);return e?(y.value=e.total_pages||1,e.results||[]):[]},f=async(a=1)=>{const e=await w.fetchAnimationTV(a);return e?(g.value=e.total_pages||1,e.results||[]):[]},B=async()=>{if(!(r.value||!M.value)){r.value=!0;try{if(o.value==="movies"){n.value++;const a=await m(n.value);u.value=[...u.value,...a]}else{v.value++;const a=await f(v.value);i.value=[...i.value,...a]}}finally{r.value=!1}}};return x(o,async a=>{a==="movies"&&u.value.length===0?(l.value=!0,n.value=1,u.value=await m(1),l.value=!1):a==="series"&&i.value.length===0&&(l.value=!0,v.value=1,i.value=await f(1),l.value=!1)}),x(c,async()=>{l.value=!0,o.value==="movies"?(n.value=1,u.value=await m(1)):(v.value=1,i.value=await f(1)),l.value=!1}),b(async()=>{l.value=!0,u.value=await m(1),l.value=!1}),(a,e)=>(d(),A("div",U,[t("div",$,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-white"},"Мультфильмы",-1)),t("div",q,[h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=p=>o.value=p),class:"input-field w-auto text-sm"},[...e[2]||(e[2]=[t("option",{value:"movies"},"Фильмы",-1),t("option",{value:"series"},"Сериалы",-1)])],512),[[V,o.value]]),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=p=>c.value=p),class:"input-field w-auto text-sm"},[...e[3]||(e[3]=[t("option",{value:"popularity"},"По популярности",-1),t("option",{value:"date"},"По дате выхода",-1),t("option",{value:"vote_average"},"По рейтингу",-1)])],512),[[V,c.value]])])]),l.value&&_.value.length===0?(d(),k(S,{key:0,text:"Загрузка мультфильмов..."})):(d(),k(j,{key:1,items:_.value,type:o.value==="movies"?"movie":"tv","has-more":M.value,loading:r.value,onLoadMore:B},null,8,["items","type","has-more","loading"]))]))}};export{z as default};
